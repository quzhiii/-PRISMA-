<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ›å»ºæµ‹è¯•é¡¹ç›®</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
        .btn { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #5a67d8; }
        .result { background: #f7fafc; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .success { background: #c6f6d5; color: #2d3748; }
    </style>
</head>
<body>
    <h1>ğŸ§ª åˆ›å»ºæµ‹è¯•é¡¹ç›®</h1>
    <p>ç‚¹å‡»æŒ‰é’®åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®ï¼Œç„¶åæ‚¨å°±å¯ä»¥ä½¿ç”¨å‰¯å®¡æŸ¥å‘˜èº«ä»½åŠ å…¥äº†ï¼š</p>
    
    <button class="btn" onclick="createTestProject()">ğŸ—ï¸ åˆ›å»ºæµ‹è¯•é¡¹ç›®</button>
    <button class="btn" onclick="showProjects()">ğŸ“‹ æŸ¥çœ‹ç°æœ‰é¡¹ç›®</button>
    <button class="btn" onclick="clearProjects()">ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰é¡¹ç›®</button>
    
    <div id="result"></div>
    
    <h2>ä½¿ç”¨è¯´æ˜ï¼š</h2>
    <ol>
        <li>ç‚¹å‡»"åˆ›å»ºæµ‹è¯•é¡¹ç›®"æŒ‰é’®</li>
        <li>å¤åˆ¶ç”Ÿæˆçš„é¡¹ç›®ID</li>
        <li>å›åˆ°ç™»å½•é¡µé¢ï¼Œé€‰æ‹©"å‰¯å®¡æŸ¥å‘˜"</li>
        <li>ç²˜è´´é¡¹ç›®IDï¼Œç°åœ¨åº”è¯¥æ˜¾ç¤º"âœ… é¡¹ç›®å·²æ‰¾åˆ°"</li>
        <li>ç‚¹å‡»ç™»å½•å³å¯åŠ å…¥é¡¹ç›®ï¼</li>
    </ol>
    
    <script>
        function createTestProject() {
            const projectId = 'PRISMA-' + Date.now().toString(36).toUpperCase() + '-TEST';
            const testProject = {
                id: projectId,
                name: 'æµ‹è¯•åä½œé¡¹ç›®',
                creator: 'æµ‹è¯•ç”¨æˆ·',
                createdAt: new Date().toISOString(),
                literatureCount: 10,
                reviewers: {
                    'reviewer-a': {
                        username: 'æµ‹è¯•ä¸»å®¡æŸ¥å‘˜',
                        joinedAt: new Date().toISOString(),
                        status: 'active'
                    }
                },
                uploadedData: [
                    { title: 'æµ‹è¯•æ–‡çŒ®1', authors: 'ä½œè€…1', year: '2023', abstract: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ‘˜è¦' },
                    { title: 'æµ‹è¯•æ–‡çŒ®2', authors: 'ä½œè€…2', year: '2023', abstract: 'è¿™æ˜¯å¦ä¸€ä¸ªæµ‹è¯•æ‘˜è¦' }
                ],
                screeningResults: {
                    included: [
                        { title: 'æµ‹è¯•æ–‡çŒ®1', authors: 'ä½œè€…1', year: '2023', abstract: 'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ‘˜è¦' },
                        { title: 'æµ‹è¯•æ–‡çŒ®2', authors: 'ä½œè€…2', year: '2023', abstract: 'è¿™æ˜¯å¦ä¸€ä¸ªæµ‹è¯•æ‘˜è¦' }
                    ]
                },
                reviewDecisions: {}
            };
            
            // ä¿å­˜åˆ°localStorage
            const projects = JSON.parse(localStorage.getItem('prisma_projects') || '{}');
            projects[projectId] = testProject;
            localStorage.setItem('prisma_projects', JSON.stringify(projects));
            
            document.getElementById('result').innerHTML = `
                <div class="result success">
                    <h3>âœ… æµ‹è¯•é¡¹ç›®åˆ›å»ºæˆåŠŸï¼</h3>
                    <p><strong>é¡¹ç›®IDï¼š</strong> <code style="background: white; padding: 2px 6px; border-radius: 3px;">${projectId}</code></p>
                    <p><strong>é¡¹ç›®åç§°ï¼š</strong> æµ‹è¯•åä½œé¡¹ç›®</p>
                    <p><strong>æ–‡çŒ®æ•°é‡ï¼š</strong> 2ç¯‡</p>
                    <br>
                    <p>ç°åœ¨æ‚¨å¯ä»¥ï¼š</p>
                    <ol>
                        <li>å¤åˆ¶ä¸Šé¢çš„é¡¹ç›®ID</li>
                        <li><a href="login.html" target="_blank">æ‰“å¼€ç™»å½•é¡µé¢</a></li>
                        <li>é€‰æ‹©"å‰¯å®¡æŸ¥å‘˜"è§’è‰²</li>
                        <li>ç²˜è´´é¡¹ç›®ID</li>
                        <li>åº”è¯¥ä¼šæ˜¾ç¤º"âœ… é¡¹ç›®å·²æ‰¾åˆ°"</li>
                    </ol>
                </div>
            `;
        }
        
        function showProjects() {
            const projects = JSON.parse(localStorage.getItem('prisma_projects') || '{}');
            const projectList = Object.keys(projects);
            
            if (projectList.length === 0) {
                document.getElementById('result').innerHTML = `
                    <div class="result">
                        <p>ğŸ“­ æš‚æ— é¡¹ç›®</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="result"><h3>ğŸ“‹ ç°æœ‰é¡¹ç›®åˆ—è¡¨ï¼š</h3>';
            projectList.forEach(id => {
                const project = projects[id];
                html += `
                    <div style="border: 1px solid #e2e8f0; padding: 10px; margin: 5px 0; border-radius: 4px;">
                        <strong>ID:</strong> <code>${id}</code><br>
                        <strong>åç§°:</strong> ${project.name || 'æœªå‘½å'}<br>
                        <strong>åˆ›å»ºè€…:</strong> ${project.creator || 'æœªçŸ¥'}<br>
                        <strong>æ–‡çŒ®æ•°:</strong> ${project.literatureCount || 0}ç¯‡
                    </div>
                `;
            });
            html += '</div>';
            
            document.getElementById('result').innerHTML = html;
        }
        
        function clearProjects() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰é¡¹ç›®å—ï¼Ÿè¿™ä¸ªæ“ä½œä¸å¯æ’¤é”€ï¼')) {
                localStorage.removeItem('prisma_projects');
                document.getElementById('result').innerHTML = `
                    <div class="result">
                        <p>ğŸ—‘ï¸ æ‰€æœ‰é¡¹ç›®å·²æ¸…ç©º</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
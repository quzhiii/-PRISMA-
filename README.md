# PRISMA 文献筛选助手 v1.7

[English](README_EN.md) | 简体中文

专为系统综述和 Meta 分析设计的自动化文献筛选工具。支持多源数据导入、智能去重、可视化筛选规则配置，并自动生成 PRISMA 2020 流程图。

🚀 **在线使用**: [GitHub Pages 链接](https://quzhiii.github.io/-PRISMA-/)

---

## 🔥 v1.7 新特性 (2026-01 Update)

针对用户反馈的痛点，本次更新重点增强了**筛选精准度**和**去重体验**：

### 1. 🛡️ 关键词优先级保护机制
**解决痛点**："排除关键词会误杀包含目标关键词的重要文献"

- **功能**：当一篇文献同时命中"包含关键词"（如 `acupuncture`）和"排除关键词"（如 `protocol`）时，系统会优先保留该文献，不再将其排除。
- **使用**：在 **步骤 2** 的包含关键词输入框下方，勾选 `🛡️ 启用保护机制：包含关键词优先于排除关键词`（默认开启）。
- **效果**：被保护的文献会在筛选结果中标记，确保重要研究不流失。

### 2. 📊 增强型智能去重
**解决痛点**："找不到去重功能，或想单独导出去重后的数据"

- **显式统计**：上传文件后（步骤 1），立即显示醒目的去重统计卡片：
  - 显示原始数量 vs 去重后数量
  - 详细列出 **DOI重复** 和 **标题重复** 的数量
- **独立导出**：新增 **"📥 仅去重导出 (CSV)"** 按钮，无需进行后续筛选即可直接获取清洗后的数据。
- **透明策略**：
  1. **DOI 精确匹配**（最高优先级，跨数据库去重利器）
  2. **标题归一化匹配**（自动忽略标点、大小写、多余空格）

---

## ✨ 核心功能

### 🚀 历史版本功能

#### v1.6 功能（工程化增强）
- 🚀 **支持3万篇大规模处理**：突破性能瓶颈，处理海量文献
- ⚡ **Web Worker后台处理**：文件解析和去重在后台线程进行，不阻塞界面
- 📊 **IndexedDB数据存储**：替代localStorage，支持无限存储容量
- 🎯 **虚拟滚动列表优化**：只渲染可见的100条，保持60fps流畅体验

#### v1.5 功能（大规模文献处理版）
- 📊 **IndexedDB替代localStorage**：突破5MB存储限制
- ⚙️ **Web Worker隔离处理**：后台解析CSV/RIS/BibTeX等格式
- 🎯 **虚拟滚动列表**：只渲染可见项，提升大规模数据性能
- 🔄 **分阶段检查并存储**：支持断点续审，防止数据丢失
- 📦 **流式解析和分块处理**：大文件按块解析，避免内存溢出

#### v1.4 功能
- 📝 **数据库导出教程**：新增PubMed、知网、WoS详细导出步骤
- 💡 **加载示例数据**：一键体验完整筛选流程
- 🛠️ **增强错误提示**：详细的错误原因分析和解决建议
- 📖 **新手引导面板**：醒目的入门帮助说明

#### v1.3 功能
- 📄 **完整摘要导出**：导出Excel时自动包含文献摘要
- 🤖 **智能研究方法识别**：自动识别研究设计类型（RCT、队列研究等）
- ✏️ **人工修正支持**：自动识别结果可手动修改
- 🏷️ **中文列名优化**：导出文件使用中文表头

#### v1.2 优化
- 🎨 **折叠面板优化**：数据库导出教程默认折叠
- 📍 **吸顶导航**：步骤导航栏滚动时吸顶
- 🛡️ **隐私声明**：醒目标注本地离线处理
- ⚙️ **去重功能说明**：添加去重设置选项

#### v1.1 核心功能（双人协作）
- 👥 **双用户登录系统**：独立登录页面
- 🤝 **项目协作机制**：主审查员创建项目，副审查员加入
- 📊 **Cohen's Kappa分析**：自动计算审查员间一致性
- 🔍 **智能分歧识别**：自动标记意见不一致的文献
- 💾 **实时数据同步**：支持跨浏览器协作

### 通用功能

#### 📁 多格式支持
- ✅ **RIS** (PubMed, Endnote, Zotero)
- ✅ **CSV / TSV** (Excel, Web of Science)
- ✅ **BibTeX** (LaTeX, JabRef)
- ✅ **ENW** (CNKI 知网)
- ✅ **RDF** (Zotero XML)
- ✅ **TXT** (PubMed, 自定义)

#### 🔍 灵活筛选规则
- 时间窗口过滤（默认2000-2030）
- 包含关键词（OR逻辑，支持多个）
- 排除关键词（自定义理由）
- **v1.7新增**：关键词优先级保护（防止误杀）
- 语言筛选（中文/英文）
- 必填字段检查

#### 🎨 PRISMA 2020流程图
- 3种配色方案（彩色/黑白/柔和）
- 符合PRISMA 2020标准
- 高质量SVG导出

#### 📊 导出功能
- 纳入文献 (Excel/CSV)
- 排除文献 (Excel/CSV，含排除理由和阶段)
- **v1.7新增**：仅去重导出（无需筛选）
- PRISMA流程图 (SVG)
- 筛选报告 (Markdown)

#### 🔒 隐私安全
- **纯本地运行**：所有数据处理在浏览器端完成
- **不上传服务器**：数据不会离开您的电脑
- **开源透明**：代码完全开源，可审查

---

## 📖 使用指南

### 第1步：上传文献数据
- 支持多文件上传（可同时选择多个数据库）
- 自动检测文件格式和字段映射
- **v1.7新增**：显示醒目的去重统计卡片
- **v1.7新增**：支持"仅去重导出"功能

### 第2步：配置筛选规则
1. **时间窗口**：设置发表年份范围（默认2000-2030）
2. **包含关键词**：
   - 每行一个关键词
   - 任一命中即通过（OR逻辑）
   - 留空则不进行关键词过滤
   - **v1.7新增**：支持优先级保护机制
3. **排除关键词**：
   - 点击"+ 添加排除规则"
   - 输入关键词和排除理由
4. **语言和必填字段**：
   - 默认允许中英文
   - 可选择必须包含标题或摘要

### 第3步：查看初步结果
- 查看PRISMA流程图
- 查看筛选统计数据
- **v1.7新增**：查看被保护的文献数量
- 下载纳入/排除文献列表

### 第4步：人工全文审查
- 逐篇审查通过标题/摘要筛选的文献
- 为需要排除的文献选择理由：
  - 人群不符
  - 干预不符
  - 对照不符
  - 缺乏结局
  - 数据不完整
  - 研究设计不合适

### 第5步：导出最终结果
- 下载完整的PRISMA流程图（3种颜色主题）
- 导出纳入/排除文献列表
- 生成筛选报告

---

## 🎯 支持的文献格式

| 格式 | 来源 | 扩展名 |
|------|------|--------|
| RIS | Zotero, Endnote, RefWorks | .ris |
| BibTeX | LaTeX, JabRef | .bib |
| CSV/TSV | 通用表格 | .csv, .tsv |
| Endnote | Endnote | .enw |
| RDF | Zotero | .rdf |
| TXT | PubMed, 自定义 | .txt |

---

## ❓ 常见问题 (FAQ)

**Q: 为什么我的文献没有被去重？**  
A: 我们使用 DOI 和归一化标题进行去重。如果两篇文献 DOI 缺失且标题差异较大，可能无法识别。建议导出时尽量包含 DOI。

**Q: "包含关键词"留空会怎样？**  
A: 如果留空，系统将**保留所有**符合年份和语言要求的文献进入下一步，仅执行排除关键词规则。

**Q: 如何处理 WOS 和 Scopus 的重复数据？**  
A: 直接将两个数据库导出的文件同时拖入上传框。v1.7 会自动执行跨源去重，您可以在 Step 1 直接点击"仅去重导出"获取合并后的数据。

**Q: v1.7 的关键词优先级保护是什么意思？**  
A: 当一篇文章同时包含"包含关键词"和"排除关键词"时，默认会保留该文章（因为它包含您感兴趣的主题）。如果您希望恢复原来的行为，可以在Step 2关闭优先级保护开关。

**Q: "仅去重导出"和正常筛选有什么区别？**  
A: "仅去重导出"只进行跨数据库去重，不执行任何筛选规则，适合只需要合并清洗数据的用户。正常筛选会在去重后应用您配置的所有规则。

---

## 🔧 技术栈

- **纯前端**：HTML + CSS + Vanilla JavaScript (ES6+)
- **无需后端**：所有处理在浏览器本地完成
- **隐私保护**：数据不上传服务器
- **依赖**：js-yaml（YAML格式解析）

---

## 🎨 设计特色

- **Perplexity风格**：采用Perplexity设计系统
- **响应式设计**：适配桌面和移动设备
- **高对比度**：确保良好的可读性
- **流畅动画**：CSS过渡和加载动画
- **暗色模式**：自动适配系统主题

---

## 📝 完整更新日志

### v1.7 (2026-01-15) - 🛡️ 关键词保护 & 去重增强
**重点改进：解决用户痛点**

✅ **新增功能：**
- 🛡️ 关键词优先级保护机制
- 📊 醒目的去重统计卡片
- 📥 仅去重导出功能
- 🔍 去重详情查看

🔧 **优化改进：**
- 增强去重算法的透明度
- 优化Step 1界面布局
- 改进错误提示信息

### v1.6 (2025-12-20) - 工程化增强
- 🚀 支持3万篇大规模处理
- ⚡ Web Worker后台处理
- 📊 IndexedDB数据存储
- 🎯 虚拟滚动列表优化

### v1.5 (2025-12-10) - 大规模文献处理
- 📊 IndexedDB替代localStorage
- ⚙️ Web Worker隔离处理
- 🎯 虚拟滚动列表
- 🔄 分阶段检查并存储
- 📦 流式解析和分块处理

### v1.4 (2025-12-01) - 新手友好
- 📝 数据库导出教程
- 💡 加载示例数据功能
- 🛠️ 增强错误提示
- 📖 新手引导面板

### v1.3 (2025-11-30)
- 📄 完整摘要导出
- 🤖 智能研究方法识别
- ✏️ 人工修正支持
- 🏷️ 中文列名优化

### v1.2 (2025-11-28)
- 🎨 折叠面板优化
- 📍 吸顶导航
- 🛡️ 隐私声明增强

### v1.1 (2025-11-25) - 👥 双人协作
- 👥 双用户登录系统
- 📊 Cohen's Kappa分析
- 🔍 智能分歧识别

### v1.0 (2025-10-24)
- 🎯 多文件上传
- 🔄 跨来源去重
- 👁️ 人工全文审查

---

## 💻 本地运行

```bash
# 克隆仓库
git clone https://github.com/quzhiii/-PRISMA-.git
cd -PRISMA-

# 启动本地服务器
python -m http.server 8000
# 或使用 npx http-server -p 8000

# 在浏览器打开
# http://localhost:8000
```

---

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT License

## 🙏 致谢

- PRISMA 2020指南
- Perplexity设计系统
- 开源社区

---

**开发者**: [quzhiii](https://github.com/quzhiii)  
**问题反馈**: [GitHub Issues](https://github.com/quzhiii/-PRISMA-/issues)  
**最后更新**: 2026-01-15
